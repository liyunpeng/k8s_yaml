[master@212-node ~]$ sudo pvcreate /dev/sdb1pvcreate /dev/sdb1
[sudo] master 的密码：
  Device /dev/sdb1pvcreate not found.
  Physical volume "/dev/sdb1" successfully created.
[master@212-node ~]$ vgcreate vg0 /dev/sdb1
  WARNING: Running as a non-root user. Functionality may be unavailable.
  /run/lock/lvm/V_vg0:aux: open failed: 权限不够
  Can't get lock for vg0.
[master@212-node ~]$ sudo vgcreate vg0 /dev/sdb1
  Volume group "vg0" successfully created


[master@212-node ~]$ sudo lvcreate -L 5G -T vg0/thinpool
  Thin pool volume with chunk size 64.00 KiB can address at most 15.81 TiB of data.
  Logical volume "thinpool" created.
[master@212-node ~]$ lvcreate -V 5G -T vg0/thinpool -n datalv
  WARNING: Running as a non-root user. Functionality may be unavailable.
  /dev/mapper/control: open failed: 权限不够
  Failure to communicate with kernel device-mapper driver.
  Incompatible libdevmapper 1.02.155-RHEL8 (2019-01-04) and kernel driver (unknown version).
  thin: Required device-mapper target(s) not detected in your kernel.
  Run `lvcreate --help' for more information.
[master@212-node ~]$ sudo lvcreate -V 5G -T vg0/thinpool -n datalv
  Logical volume "datalv" created.



[centos5@68-node k8s_yaml]$ sudo vgdisplay
[sudo] centos5 的密码：
  --- Volume group ---
  VG Name               cl
  System ID
  Format                lvm2
  Metadata Areas        1
  Metadata Sequence No  4
  VG Access             read/write
  VG Status             resizable
  MAX LV                0
  Cur LV                3
  Open LV               2
  Max PV                0
  Cur PV                1
  Act PV                1
  VG Size               <297.09 GiB
  PE Size               4.00 MiB
  Total PE              76054
  Alloc PE / Size       76054 / <297.09 GiB
  Free  PE / Size       0 / 0
  VG UUID               qRMzdn-5qHI-srdp-TJ7K-CHL1-Umak-cuevgO

[centos5@68-node k8s_yaml]$ sudo pvdisplay
  --- Physical volume ---
  PV Name               /dev/sda2
  VG Name               cl
  PV Size               <297.09 GiB / not usable 4.00 MiB
  Allocatable           yes (but full)
  PE Size               4.00 MiB
  Total PE              76054
  Free PE               0
  Allocated PE          76054
  PV UUID               cR2yND-b5Of-RWYv-UPnN-m80S-YdJC-iLmo7U

[centos5@68-node k8s_yaml]$ suddo lvdisplay
bash: suddo: 未找到命令...
相似命令是： 'sudo'
[centos5@68-node k8s_yaml]$  lvdisplay
  WARNING: Running as a non-root user. Functionality may be unavailable.
  /dev/sda: open failed: 权限不够
  /dev/mapper/control: open failed: 权限不够
  Failure to communicate with kernel device-mapper driver.
  Incompatible libdevmapper 1.02.155-RHEL8 (2019-01-04) and kernel driver (unknown version).
  /dev/sda1: open failed: 权限不够
  /dev/sda2: open failed: 权限不够
[centos5@68-node k8s_yaml]$ sudo lvdisplay
  --- Logical volume ---
  LV Path                /dev/cl/swap
  LV Name                swap
  VG Name                cl
  LV UUID                4zh8X6-OiRb-zk38-2duv-pMZS-5ipQ-LtR5hk
  LV Write Access        read/write
  LV Creation host, time bogon, 2019-12-31 22:47:58 -0500
  LV Status              available
  # open                 0
  LV Size                <2.07 GiB
  Current LE             529
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     8192
  Block device           253:1

  --- Logical volume ---
  LV Path                /dev/cl/home
  LV Name                home
  VG Name                cl
  LV UUID                Pte3Cz-Blbz-MIAc-C2oe-CTuj-MRRR-fR0zM2
  LV Write Access        read/write
  LV Creation host, time bogon, 2019-12-31 22:47:59 -0500
  LV Status              available
  # open                 1
  LV Size                <245.02 GiB
  Current LE             62725
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     8192
  Block device           253:2

  --- Logical volume ---
  LV Path                /dev/cl/root
  LV Name                root
  VG Name                cl
  LV UUID                oJkz8g-2caV-0S0G-aFnS-QtU0-lVtd-9YXm8X
  LV Write Access        read/write
  LV Creation host, time bogon, 2019-12-31 22:48:02 -0500
  LV Status              available
  # open                 1
  LV Size                50.00 GiB
  Current LE             12800
  Segments               1
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     8192
  Block device           253:0


[master@212-node ~]$ sudo  yum -y install centos-release-gluster
上次元数据过期检查：0:30:30 前，执行于 2020年01月04日 星期六 11时28分07秒。
未找到匹配的参数： centos-release-gluster
错误：没有任何匹配



[master@212-node ~]$  yum search centos-release-gluster
CentOS-8 - AppStream                                                                               1.5 MB/s | 6.3 MB     00:04
CentOS-8 - Base                                                                                    801 kB/s | 7.9 MB     00:10
CentOS-8 - Extras                                                                                  202  B/s | 2.1 kB     00:10
Docker CE Stable - x86_64                                                                           14 kB/s |  21 kB     00:01
Kubernetes                                                                                         195  B/s | 454  B     00:02
Kubernetes                                                                                         1.6 kB/s | 1.8 kB     00:01
导入 GPG 公钥 0xA7317B0F:
 Userid: "Google Cloud Packages Automatic Signing Key <gc-team@google.com>"
 指纹: D0BC 747F D8CA F711 7500 D6FA 3746 C208 A731 7B0F
 来自: https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg
确定吗？[y/N]： y
导入 GPG 公钥 0xBA07F4FB:
 Userid: "Google Cloud Packages Automatic Signing Key <gc-team@google.com>"
 指纹: 54A6 47F9 048D 5688 D7DA 2ABE 6A03 0B21 BA07 F4FB
 来自: https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg
确定吗？[y/N]： y
Kubernetes                                                                                         873  B/s | 975  B     00:01
导入 GPG 公钥 0x3E1BA8D5:
 Userid: "Google Cloud Packages RPM Signing Key <gc-team@google.com>"
 指纹: 3749 E1BA 95A8 6CE0 5454 6ED2 F09C 394C 3E1B A8D5
 来自: https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg
确定吗？[y/N]： y
Kubernetes                                                                                          24 kB/s |  82 kB     00:03
未找到匹配项。

==============================
[master@212-node yum.repos.d]$ rpm -qa |grep gluster
glusterfs-client-xlators-3.12.2-40.2.el8.x86_64
glusterfs-3.12.2-40.2.el8.x86_64
glusterfs-cli-3.12.2-40.2.el8.x86_64
qemu-kvm-block-gluster-2.12.0-64.module_el8.0.0+44+94c1b039.2.x86_64
glusterfs-libs-3.12.2-40.2.el8.x86_64
glusterfs-api-3.12.2-40.2.el8.x86_64
libvirt-daemon-driver-storage-gluster-4.5.0-23.3.module_el8.0.0+44+94c1b039.x86_64

[master@212-node yum.repos.d]$ sudo vi CentOS-Storage-common.repo
[master@212-node yum.repos.d]$ sudo yum update
GlusterFS is a clustered file-system capable of scaling to several petabytes.                      166  B/s | 1.3 kB     00:07
GlusterFS is a clustered file-system capable of scaling to several petabytes.                      555  B/s |  23 kB     00:42
上次元数据过期检查：0:00:02 前，执行于 2020年01月04日 星期六 12时44分27秒。
错误：
 问题: package docker-ce-3:19.03.5-3.el7.x86_64 requires containerd.io >= 1.2.2-3, but none of the providers can be installed
  - cannot install the best update candidate for package docker-ce-18.06.3.ce-3.el7.x86_64
  - package containerd.io-1.2.10-3.2.el7.x86_64 is excluded
  - package containerd.io-1.2.2-3.3.el7.x86_64 is excluded
  - package containerd.io-1.2.2-3.el7.x86_64 is excluded
  - package containerd.io-1.2.4-3.1.el7.x86_64 is excluded
  - package containerd.io-1.2.5-3.1.el7.x86_64 is excluded
  - package containerd.io-1.2.6-3.3.el7.x86_64 is excluded
(try to add '--skip-broken' to skip uninstallable packages or '--nobest' to use not only best candidate packages)
[master@212-node yum.repos.d]$ sudo vi CentOS-Storage-common.repo ^C
[master@212-node yum.repos.d]$ sudo yum -y install epel-release
上次元数据过期检查：0:02:25 前，执行于 2020年01月04日 星期六 12时44分27秒。
依赖关系解决。
===================================================================================================================================
 软件包                             架构                         版本                           仓库                          大小
===================================================================================================================================
Installing:
 epel-release                       noarch                       8-5.el8                        extras                        22 k

事务概要
===================================================================================================================================
安装  1 软件包

总下载：22 k
安装大小：30 k
下载软件包：
epel-release-8-5.el8.noarch.rpm                                                                     18 kB/s |  22 kB     00:01
-----------------------------------------------------------------------------------------------------------------------------------
总计                                                                                               8.3 kB/s |  22 kB     00:02
运行事务检查
事务检查成功。
运行事务测试
事务测试成功。
运行事务
  准备中      :                                                                                                                1/1
  Installing  : epel-release-8-5.el8.noarch                                                                                    1/1
  运行脚本    : epel-release-8-5.el8.noarch                                                                                    1/1
  验证        : epel-release-8-5.el8.noarch                                                                                    1/1

已安装:
  epel-release-8-5.el8.noarch

完毕！

[master@212-node yum.repos.d]$ sudo yum install -y glusterfs-server-7.1-1.el8.x86_64
上次元数据过期检查：0:01:52 前，执行于 2020年01月04日 星期六 12时47分53秒。
错误：
 问题: conflicting requests
  - nothing provides python3-pyxattr needed by glusterfs-server-7.1-1.el8.x86_64
(try to add '--skip-broken' to skip uninstallable packages or '--nobest' to use not only best candidate packages)


[gluster]
name=gluster
baseurl=https://buildlogs.centos.org/centos/7/storage/x86_64/gluster-7/
gpgcheck=0
enabled=1


[master@212-node yum.repos.d]$ rpm -qa | grep python3-py
python3-pyOpenSSL-18.0.0-1.el8.noarch
python3-pyyaml-3.12-12.el8.x86_64
python3-pyparted-3.11.0-13.el8.x86_64
python3-pyxdg-0.25-16.el8.noarch
python3-pyudev-0.21.0-7.el8.noarch
python3-pydbus-0.6.0-5.el8.noarch
python3-pyatspi-2.26.0-6.el8.noarch


[centos5@68-node ~]$ rpm -i glusterfs-resource-agents-6.6-1.el8.noarch.rpm
警告：glusterfs-resource-agents-6.6-1.el8.noarch.rpm: 头V4 RSA/SHA256 Signature, 密钥 ID c2f8238c: NOKEY
错误：依赖检测失败：
        /usr/lib/ocf/resource.d 被 glusterfs-resource-agents-6.6-1.el8.noarch 需要
        glusterfs-server = 6.6-1.el8 被 glusterfs-resource-agents-6.6-1.el8.noarch 需要

===============================
centos默认安装了Nfs客户端
[user9@217-node ~]$  mount -t nfs 192.168.0.211:/usr/local/k8s/redis/pv1  ./a^C
[user9@217-node ~]$ mkdir a
[user9@217-node ~]$  mount -t nfs 192.168.0.215:/usr/local/k8s/redis/pv1  ./a
mount: 只有 root 用户能使用“--types”选项
[user9@217-node ~]$ sudo  mount -t nfs 192.168.0.215:/usr/local/k8s/redis/pv1  ./a
[sudo] user9 的密码：
[user9@217-node ~]$ ls ./a
[user9@217-node ~]$ cd a


================================================
[centos5@68-node pyxattr-0.7.1]$ sudo wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-8.repo
--2020-01-04 03:45:54--  http://mirrors.aliyun.com/repo/Centos-8.repo
正在解析主机 mirrors.aliyun.com (mirrors.aliyun.com)... 27.221.92.112, 119.167.188.227, 27.221.92.125, ...
正在连接 mirrors.aliyun.com (mirrors.aliyun.com)|27.221.92.112|:80... 已连接。
已发出 HTTP 请求，正在等待回应... 200 OK
长度：2595 (2.5K) [application/octet-stream]
正在保存至: “/etc/yum.repos.d/CentOS-Base.repo”

/etc/yum.repos.d/CentOS-Base.repo  100%[================================================================>]   2.53K  --.-KB/s  用时 0s

2020-01-04 03:45:54 (157 MB/s) - 已保存 “/etc/yum.repos.d/CentOS-Base.repo” [2595/2595])

======================================
